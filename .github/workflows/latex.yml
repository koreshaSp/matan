name: Compile Latex and Release PDF  

on: push
jobs:
  build_latex:
    runs-on: ubuntu-latest
    steps:
      - name: Get current time
        uses: josStorer/get-current-time@v2
        id: current-time
        with:
          format: DD.MM.YYYY-HH.mm
          utcOffset: "+03:00"
      - name: Set up Git repository
        uses: actions/checkout@v2
      - name: Compile LaTeX document
        uses: xu-cheng/latex-action@v2
        with:
          root_file: main.tex

      - name: Create Release
        id: create_release
        uses: actions/create-release@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          tag_name: ${{ steps.current-time.outputs.formattedTime }}
          release_name: Release ${{ steps.current-time.outputs.formattedTime }}
          draft: false
          prerelease: false

      - name: Upload Release Asset
        id: upload-release-asset 
        uses: actions/upload-release-asset@v1
        env:
          GITHUB_TOKEN: ${{ secrets.GITHUB_TOKEN }}
        with:
          upload_url: ${{ steps.create_release.outputs.upload_url }} 
          asset_path: ./main.pdf
          asset_name: main.pdf
          asset_content_type: pdf

      - name: Upload to gdrive
        uses: adityak74/google-drive-upload-git-action@main
        with:
          credentials: "eyAidHlwZSI6ICJzZXJ2aWNlX2FjY291bnQiLCAicHJvamVjdF9pZCI6ICJubG9nbi0zNDAwMTEiLCAicHJpdmF0ZV9rZXlfaWQiOiAiYTliNjdlODY5YmY2NDQ2NDY1M2JmZGRkZjNkOGU2ZTUzZjQwYjAzYyIsICJwcml2YXRlX2tleSI6ICItLS0tLUJFR0lOIFBSSVZBVEUgS0VZLS0tLS0KTUlJRXZnSUJBREFOQmdrcWhraUc5dzBCQVFFRkFBU0NCS2d3Z2dTa0FnRUFBb0lCQVFEQUQ0ak1vSEU0cTNTQgo2WjY1V1ZqdTZRa2t1Rmpic1kyYm44TmJOTkxFeHk0R01sRUVUYTk2eGNZYmJ5akhyMllLZk9sZjkvTk9qQkErCmkxUFRteXRWSkZFbG8xTDZvcFhzenBsRVJzZkZ1ejgyTG1oSHBSVVR5WitlQ09QZTEzQXB4NWVhQlAza0tkWlMKekg2STJkQmNwNEdWMk5SaTIzcGpLM01wZU5hVUxPQ1VXWHc1Ylp1ZVRGZFBxSElQaU52TlE3ZkJXS1htaFVqUAprTkVuZFlpcGFKWHNVMzFtakhBL1NqY20yRi95TGVBZ01hTjRaRnJOb0t5K3hTRzNBQmcwOFhkWUZJRGxlN2RBCnlsYUhuOCtxb1YwL1Z2cUNzbU03ZVk2R0FqVWpmTnUvOVJuM1Ezd2J6VXVFZlRyM2twMUNJWmpmV0hwa2FOYUYKOXNxTDdNU0JBZ01CQUFFQ2dnRUFDUDFSSmw3R0hlUnNqaDRjdDBrMnordnBhU1lWeHFhdlhaN2pPblFrLzEvaApTQm4zejg5QkRPcVA1TDNWdDA3KzVEUEhpcDNrN2dMQlNlUWtsczEzQUVPMFpxSVg0ckpVZVNLTWF2VXpLWTZqCm5Vb2J5R3F5SzF4dkU2c1AyMkRURjZtSGI0YVhTYVFwcTNOMTRycnJOVU1EM2pzcGFiMGpJOXduUmtRcEt3TS8KN1RpU3RTUm5oVFhSUExDbFNTTzkrMU5QRVorK0NZUUdyYzhmQUxSNWpZTVVOZEdPRG5lUjh0clhqK1c5cS9JdQpleWk0RzBJRFlob2EwYXNudWtTdVpkRWdzTWVvYXozYmNrUmMxUlpRbUk2em1OOEtPYnFYWUZFKzF4cENncm95CkRVcTB6cWM1c05pazRyZmxXSVRzZ29OeGZlZXlNbGxjSWpiZUdJMTZod0tCZ1FEc05xdVJBR2QraWhGTXFaRmwKaHhEeE9IZDZHYVVVN3UyZ3RJbXFxeUplQS90TjZUZG9ISEhieUl1bkxEQ0dxS09iNzQ1Y0Q5Q1o0TER0ZzNaWgp2SG5DSHRzQVFOY2lHdDlyMlI0NlVsRlovbkdkR2VlbXFqbUhGNXRFaDhySHlRRml6RkpqVWU3Mnd1dkZFZm1rClkrVXJOSjQvQkVTbWFIWllIdjdoMERpV0F3S0JnUURRSmc1bVFwSDR1WHg1cE9QRWZMTG95QVBxSHlSaWdLbTEKWTRhYVMzYW55Zmdzc0dJU015U2FCUmhveHRpZmI5dkVUcitodFppL3lnMld4azRmUjQvV0czZncwWVoxOVhFaAo0QjFaNHRjUHFLZ1VvNUVKRnJRYXgvazdacWNmZlk3azhieCtNeWtEQm50N08ra2JSMEJkM0p5dDZIK0UzVkIzCldCSk1BcUtHS3dLQmdRQzRmZjdFa3k5Q2F5NFYxWDhsY0Rmd1grMFpaYnhGUEZSSEo1czZ2TTFyNXVvNk1RUkEKZ2E4QVBZT3QvMXFyWWozZlJsekhWT2JWdU9RWHJvMGFpNVlCNHoyajFnRHh0MUYzbDYzL1dWb0cwekFEeHo3aQpNcVFaK25zZ0xIdGFUWW1TbEFscFg0NG9GNWcwWk5TNTYvZ0xKZDdQVTFNWE1oSDB3OGpKc0dyeDV3S0JnR2w5ClFBTDNiZjgrRWlXY09ZclZIOTcxcjNZeC9rQ2xzRnlyYWdZOGhKQVl2ZHY0TUZ2RTY2SGJQem1xdlJKZ29HSm0KL3B1MzZ3Z1lJTGJ2SFp5Z3FmYjZ5TmlWZDYzRWpHZDhxNk5vWVZJZ1NiN2IvcDg2a0dDYVJHZWthTUorNGJLSwpDTnQwbGk1Z1ZLaHAvb1BDb281dlJrQ2sraXVkOWkvbHhMQWREYjB0QW9HQkFOci94b3d0R2Iram4yWlhyNFZWCm9JenZWWlUraVBCOGxEcmJMMnlXZGpwbnllTmlRWDNVTmtCVVA3VUxIQWVwRHh4R2dMTXAwdVJQOG9KSXpQOVEKTWRQc3hyRklaSGlmaC9kVW5yM0ZkY0F1bU9vT2FZMHRGQTFTWm5sUGpCZUNEK2t5R3gvdzZPLzFFTjVyOEtUcApDdW9sZklId2d0dURvWU9EeGxheEFqc0EKLS0tLS1FTkQgUFJJVkFURSBLRVktLS0tLQoiLCAiY2xpZW50X2VtYWlsIjogImFjYy01NjZAbmxvZ24tMzQwMDExLmlhbS5nc2VydmljZWFjY291bnQuY29tIiwgImNsaWVudF9pZCI6ICIxMDk4ODkxOTYwOTAyMDQxMTY4NjAiLCAiYXV0aF91cmkiOiAiaHR0cHM6Ly9hY2NvdW50cy5nb29nbGUuY29tL28vb2F1dGgyL2F1dGgiLCAidG9rZW5fdXJpIjogImh0dHBzOi8vb2F1dGgyLmdvb2dsZWFwaXMuY29tL3Rva2VuIiwgImF1dGhfcHJvdmlkZXJfeDUwOV9jZXJ0X3VybCI6ICJodHRwczovL3d3dy5nb29nbGVhcGlzLmNvbS9vYXV0aDIvdjEvY2VydHMiLCAiY2xpZW50X3g1MDlfY2VydF91cmwiOiAiaHR0cHM6Ly93d3cuZ29vZ2xlYXBpcy5jb20vcm9ib3QvdjEvbWV0YWRhdGEveDUwOS9hY2MtNTY2JTQwbmxvZ24tMzQwMDExLmlhbS5nc2VydmljZWFjY291bnQuY29tIiB9"
          filename: "main.pdf"
          folderId: "1RKblit-BBTRVrtOb7_ZAm14YBE0qR1_i"
          name: "main.pdf" # optional string
          overwrite: "true" # optional boolean

